<template>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    .mcp-shell {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      overflow: hidden;
    }
    .mcp-app-container {
      width: 100%;
      height: 100%;
      overflow: auto;
    }
    .mcp-menu-button {
      position: fixed;
      top: 8px;
      right: 8px;
      z-index: 1000;
      opacity: 0.6;
      transition: opacity 0.2s;
    }
    .mcp-menu-button:hover {
      opacity: 1;
    }
    .mcp-menu-dropdown {
      position: fixed;
      top: 44px;
      right: 8px;
      z-index: 1000;
      background: var(--sl-color-neutral-0);
      border: 1px solid var(--sl-color-neutral-200);
      border-radius: var(--sl-border-radius-medium);
      box-shadow: var(--sl-shadow-large);
      min-width: 150px;
      padding: var(--sl-spacing-x-small) 0;
    }
    .mcp-menu-item {
      padding: var(--sl-spacing-small) var(--sl-spacing-medium);
      cursor: pointer;
      font-family: var(--sl-font-sans);
      font-size: var(--sl-font-size-medium);
    }
    .mcp-menu-item:hover {
      background: var(--sl-color-primary-50);
    }
    .hidden { display: none !important; }
  </style>

  <div class="mcp-shell">
    <!-- Current app content -->
    <div class="mcp-app-container" ui-view="value"></div>

    <!-- App switcher menu button (9-dot grid) -->
    <sl-icon-button
      class="mcp-menu-button"
      name="grid-3x3-gap-fill"
      label="App Menu"
      ui-action="toggleMenu()">
    </sl-icon-button>

    <!-- Dropdown menu -->
    <div class="mcp-menu-dropdown" ui-class-hidden="menuHidden()">
      <div ui-view="availableApps()?wrapper=lua.ViewList"></div>
    </div>

    <!-- Hidden element for JavaScript execution -->
    <div style="display:none;" ui-code="code"></div>
  </div>
</template>
